
///*-----------------------------------------*\
//    #CARDS
//    Masonry Archive Posts Spacing
//\*-----------------------------------------*/


///*-----------------------------------------*\
//
//	 Cards Columns:
//
//   |---|   |   |             |   |   |---|
//   |---|   |   |             |   |   |---|
//   |-0-| 1 | 2 |  Grid Item  | 2 | 1 |-0-|
//   |---|   |   |             |   |   |---|
//   |---|   |   |             |   |   |---|
//   
//\*-----------------------------------------*/


$breakpoints: (
	"small": 480px,
	"large": 1440px
);

$cards-gutter: $gutter;

@mixin cards-spacing($col, $breakpoint) {

	$cards-gutter: $col !global;

	@include placeholder("col-left-0", $col) { margin-left: -$col }
	@include placeholder("col-left-1", $col) { margin-left: 0 }
	@include placeholder("col-left-2", $col) { margin-left: $col }

	@include placeholder("col-left-p0", $col) { padding-left: -$col }
	@include placeholder("col-left-p1", $col) { padding-left: 0 }
	@include placeholder("col-left-p2", $col) { padding-left: $col }
	@include placeholder("col-left-p3", $col) { padding-left: 2*$col }

	@include placeholder("col-right-0", $col) { margin-right: -$col }
	@include placeholder("col-right-1", $col) { margin-right: 0 }
	@include placeholder("col-right-2", $col) { margin-right: $col }
	@include placeholder("col-right-3", $col) { margin-right: 2*$col }

	@include placeholder("col-right-p0", $col) { padding-right: -$col }
	@include placeholder("col-right-p1", $col) { padding-right: 0 }
	@include placeholder("col-right-p2", $col) { padding-right: $col }


	@include breakpoint($breakpoint) {

		// GENERAL GRID
		.grid {
			border-right-width: $col;
		}

		.grid__item {
			border-left-width: $col + 1px;
		}

		// GENERAL
		.entry-card {
			.entry-meta {
				@include _("col-left-2");
				@include _("col-right-3")
			}

			.entry-content {
				@include _("col-left-2");
				@include _("col-right-2");
			}
		}


		// TEXT
		.entry-card--text {
			.entry-meta {

			}

			.entry-header {
				@include _("col-left-0");
				@include _("col-left-p3");
				@include _("col-right-2");
			}

			.entry-content {

			}
		}


		// LANDSCAPE
		.entry-card--landscape {
			.entry-meta {

			}

			.entry-image {
				@include _("col-left-0");
				@include _("col-right-2");
			}

			.entry-header {
				@include _("col-left-2");
				@include _("col-right-2");
			}

			.entry-content {

			}
		}


		// WIDE
		.entry-card--wide {
			.entry-meta {

			}

			.entry-image {
				@include _("col-left-0");
				@include _("col-right-0");
			}

			.entry-header {
				@include _("col-left-2");
				@include _("col-right-2");
			}

			.entry-content {

			}
		}


		// SQUARE
		.entry-card--square {
			.entry-meta {
				
			}

			.entry-image {
				@include _("col-left-2");
				@include _("col-right-3");
			}

			.entry-header {
				@include _("col-left-2");
				@include _("col-right-3");
			}

			.entry-content {
				@include _("col-right-3");
			}
		}


		// PORTRAIT
		// TALL
		.entry-card--portrait,
		.entry-card--tall {
			.entry-image {
				@include _("col-left-0");
			}

			.entry-header {
				@include _("col-right-1");
			}

			.entry-content {
				@include _("col-right-1");
			}
		}

		// EVEN CASE
		.entry--even {

			// PORTRAIT
			// TALL
			.entry-card--portrait,
			.entry-card--tall {
				.entry-image {
					@include _("col-right-0");
				}

				.entry-content {
					@include _("col-left-1");
				}
			}
		}
	
	}
}


.blog, 
// .archive, 
// .search 
	{

	.entry-header {
		position: relative;
		padding: 20px;
		margin-bottom: 15px;
		background: black;
		color: white;

		@include query-above($small) {
			margin-right: $gutter;
		}
	}

	.page-header {
		margin-top: 50px;
	}

	.page-title {
		margin-top: 0;
	}

	// @media only screen and (min-width: 480px) {
	// }


	@media only screen and (min-width: 1440px) {
	}
}

@include cards-spacing(24px, small);
@include cards-spacing(30px, large);

// #CARD

.entry-card,
.site-header {
	transform: translateZ(0);
	opacity: 0;
	transition: opacity .3s ease-in-out;

	&.is-visible {
		opacity: 1;
	}
}

.site-header {
	@include query-below($lap) {
		transform: none !important;
		z-index: 100;
	}
}

.entry-card {
	@extend .clearfix;
	position: relative;
	background: white;
	// hack to keep things inside
	padding-top: 1px;

	.entry-image img {
		transition: filter .3s ease-in-out;
		transition: -webkit-filter .3s ease-in-out;
		transform: translateZ(0);
	}

	&:hover {

		.entry-image img {
			-webkit-backface-visiblity: hidden;
			filter: saturate(0);
			-webkit-filter: grayscale(1);
		}

		span {
			opacity: 1;
		}
	}
	
	// Post Meta (categories, author and date)
	.entry-meta {
		@extend %clearfix;
		position: absolute;
		margin-bottom: 0;
		margin-top: 4px;
		z-index: -1;

		@extend %alpha;
		font-size: 11px;
		font-weight: 400;
		letter-spacing: 0;

		opacity: 0;
		padding-bottom: $gutter/2;
		transform: translateZ(0);

		.byline {
			margin-bottom: -5px;
		}

		.byline,
		.posted-on {
			margin-top: 5px;
		}

		> * {
			float: left;
		}

		.touch & {
			position: static;
			opacity: 1;
		}
	}

	.entry--even & {

		&.entry-card--tall,
		&.entry-card--portrait {
			.entry-meta {
				right: 0;

				> * {
					float: right;
					margin-left: 10px;
					margin-right: 0;
				}
					
				.posted-on:before {
					display: none;
				}

				.posted-on:after {
					content: "/";
					margin-left: 4px;
				}
			}
		}
	}

	.entry-time {
		display: none;
	}

	.entry-content {
		font-size: 14px;

		> :last-child {
			margin-bottom: 0;
		}

		p {
			margin-bottom: 15px;

			&:last-of-type {
				// margin-bottom: 0;
			}
		}
	}
}



.entry-image {
	position: relative;
	z-index: 32; //over .entry-meta
	display: block;

	figure {
		max-width: 100%;
		height: auto;
	}

	// background: black;

	@include query-above($lap) {
		// margin-right: $gutter;

		&--wide {
			// margin: 0 #{-$gutter};
		}
	}

	img {
		display: block;
		width: 100%;
	}

	.hover {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translateY(-50%) translateX(-50%);
		z-index: 100;

		@extend %beta;
		@extend %fs-24;
		text-transform: uppercase;
		text-align: center;
		// -webkit-font-smoothing: antialiased;

		color: white;

		opacity: 0;

		transition: all 0.3s;
	}
}



// #PORTRAIT
// #TALL

.entry-image--tall {
	max-width: 45%;	
	max-width: calc(45% - $gutter);
}

.entry-image--tall,
.entry-image--portrait {
	float: left;
	margin-right: $gutter/2;
	position: relative;
	z-index: 40;
	margin-bottom: $gutter/3;

	~ .entry-content {

		margin-top: 2px;

		p:last-of-type {
			margin-bottom: 0;
		}
	}

	+ .entry-header {
		// margin-top: 0 !important;

		h1 {
			// letter-spacing: 0.02em;
		}
	}
}



// #PORTRAIT

.entry-image--portrait {
	max-width: 55%;

	@include query-above($small) {
	}
}

// #TALL

.entry-card--tall {
	.entry-image {

	}

	.entry-content {
		
	}
}




.entry-header {
	@extend .entry-block;
	// text-transform: uppercase;

	.entry-card & .entry-title{
		color: white;
	}

	.entry-image + & {
		background: none;
		color: black;
		padding: 0;


		margin-top: 10px;
		margin-bottom: 0;
		border-bottom: 5px solid white;

		.entry-title {
			color: $dark;
		}
	}

	a {
		color: currentColor;
		text-decoration: none;
	}
}

.entry-title {
	@extend %beta;
	font-weight: normal;
	margin: 0;
}

.entry-content {
	@extend .entry-block;	
	margin-bottom: $gutter/3;
}

.entry--even {
	position: relative;
	z-index: 20;

	.entry-image--tall,
	.entry-image--portrait {
		margin-right: 0;
		padding-right: 0;

		margin-left: $gutter/2;	
		float: right;
		
		~ .entry-block {
			text-align: right;
		}
	} 

} 

.blog, .archive, .search {
	
	@include query-below($lap) {
		.entry-header {
			margin-left: 0;
			margin-right: 0;
			padding-left: $gutter;
			padding-right: $gutter * 2/3;
		}

		.entry-image + .entry-header {
			padding: 0;
			margin-right: $gutter;
		}

		.entry-image--landscape {
			margin-right: 0;
			margin-left: 0;
		}

		.entry-image--wide {
			margin-left: 0;
			margin-right: 0;
		}

		.entry-image--square,
		.entry-image--square ~ .entry-content {
			margin-right: $gutter;
		}
	}

	@include query-below(480px) {

		.entry-header {
			padding-left: $gutter;
			margin-right: 0;
		}

		.entry-image + .entry-header {
			margin-left: $gutter;
			margin-right: $gutter;
		}

		.entry-content {
			margin-left: $gutter;
			margin-right: $gutter;
		}

		.entry-image--square {
			margin-left: $gutter;
		}

		.entry-image--tall,
		.entry-image--portrait {
			max-width: 40%;
		}

		.entry-meta {
			margin-left: $gutter;
			margin-right: $gutter;
		}
		
	}

	@include query-below(320px) {
		.entry-image--tall,
		.entry-image--portrait {
			max-width: 35%;
		}
	}
}


// Sticky Post Ribbon
.sticky .sticky-post {
	position: absolute;
	top: 0;
	right: 20px;
	z-index: 1;
	display: block;
	width: 15px;
	height: 15px;
	background: $accent;

	&:before, &:after {
		content: "";
		position: absolute;
		bottom: -8px;
		left:0;
		width: 0;
		height:0;
		border-top: 8px solid $accent;
		border-right: 8px solid transparent;
	}

	&:after {
		left: auto;
		right: 0;
		border-left: 8px solid transparent;
		border-right: none;
	}



	// display: inherit;

	&.entry-card {
		// @todo
		// needs design

	}
}
